<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>AWS SDK for JavaScript - Browser Getting Started Application</title>
  </head>

  <body>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.410.0.min.js"></script>
    <script type="text/javascript">

        // Initialize the Amazon Cognito credentials provider
        AWS.config.region = 'eu-west-1'; // RÃ©gion
        AWS.config.credentials = new AWS.CognitoIdentityCredentials({
    IdentityPoolId: 'eu-west-1:a40474e9-d90b-494d-836d-7e55d8f9da3b',
});

AWS.config.getCredentials(function(err) {
  if (err) console.log(err.stack);
  
  // credentials not loaded
  else {
    console.log("Access key:", AWS.config.credentials.accessKeyId);
    const itemsAll = scanAll("VideoAWS");
    itemsAll.then(function(value) {
      for(var i =0;i<100000;i++){
        if(value[i]!== undefined){
      console.log(value[i]);

      var file = "https://"+value[i].srcBucket+".s3."+AWS.config.region+".amazonaws.com/"+value[i].srcVideo;
      console.log(file);

    }
      }
    // expected output: 123
});

  }
});

const documentClient = new AWS.DynamoDB.DocumentClient();

const scanAll = async (tableName) => {
  let lastEvaluatedKey = 'dummy'; // string must not be empty
  const itemsAll = [];
  let table = { TableName: tableName };


  while (lastEvaluatedKey) {
    const data = await documentClient.scan(table).promise();
    itemsAll.push(...data.Items);
    lastEvaluatedKey = data.LastEvaluatedKey;
    if (lastEvaluatedKey) {
      table.ExclusiveStartKey = lastEvaluatedKey;
    }
  }
  return itemsAll;
}



      
    </script>
  </body>
</html>